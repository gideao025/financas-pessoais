<section class="mx-auto flex w-full max-w-6xl flex-col gap-6">
  <div class="flex flex-wrap items-end justify-between gap-4">
    <div>
      <h2 class="text-3xl font-black tracking-tight">Relatórios e Análises Financeiras</h2>
      <p class="text-sm text-[#64748b]">Última sincronização: há 2 minutos</p>
    </div>
    <div class="flex gap-2">
      <button class="rounded-lg border border-[#dbe0e6] bg-white px-3 py-2 text-sm font-bold dark:border-[#2a3441] dark:bg-[#1a242f]">Intervalo de Datas</button>
      <button class="rounded-lg border border-[#dbe0e6] bg-white px-3 py-2 text-sm font-bold dark:border-[#2a3441] dark:bg-[#1a242f]">Categoria</button>
    </div>
  </div>

  <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
    <article class="rounded-xl border border-[#e7ebf1] bg-white p-5 dark:border-[#2a3441] dark:bg-[#1a242f]"><p class="text-sm text-[#64748b]">Patrimônio Líquido Total</p><p class="text-3xl font-black">R$ 142.500,00</p></article>
    <article class="rounded-xl border border-[#e7ebf1] bg-white p-5 dark:border-[#2a3441] dark:bg-[#1a242f]"><p class="text-sm text-[#64748b]">Variação Mensal</p><p class="text-3xl font-black">+R$ 3.240,50</p></article>
    <article class="rounded-xl border border-[#e7ebf1] bg-white p-5 dark:border-[#2a3441] dark:bg-[#1a242f]"><p class="text-sm text-[#64748b]">Taxa de Poupança</p><p class="text-3xl font-black">{{ margem() | percent: '1.1-1' : 'pt-BR' }}</p></article>
  </div>

  <div class="grid grid-cols-1 gap-4 xl:grid-cols-2">
    <article class="rounded-xl border border-[#e7ebf1] bg-white p-5 dark:border-[#2a3441] dark:bg-[#1a242f]">
      <h3 class="mb-3 text-xl font-bold">Crescimento de Patrimônio</h3>
      <div class="h-56 rounded-lg bg-[#f8fafc] dark:bg-[#24313f] flex items-center justify-center">
        <svg viewBox="0 0 100 40" class="h-[70%] w-[90%]">
          <defs>
            <linearGradient id="areaPatrimonio" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="#2563eb" stop-opacity="0.35" />
              <stop offset="100%" stop-color="#2563eb" stop-opacity="0" />
            </linearGradient>
          </defs>
          <path [attr.d]="patrimonioPath()" fill="url(#areaPatrimonio)"></path>
          <polyline
            [attr.points]="patrimonioLine()"
            fill="none"
            stroke="#2563eb"
            stroke-width="1.5"
            stroke-linejoin="round"
            stroke-linecap="round">
          </polyline>
        </svg>
      </div>
    </article>
    <article class="rounded-xl border border-[#e7ebf1] bg-white p-5 dark:border-[#2a3441] dark:bg-[#1a242f]">
      <div class="mb-3 flex items-center justify-between">
        <h3 class="text-xl font-bold">Gastos Mensais</h3>
        <div class="inline-flex rounded bg-[#eef2f6] p-1 text-xs font-bold dark:bg-[#24313f]">
          <button class="px-3 py-1 rounded" [ngClass]="periodo() === '3m' ? 'bg-primary/10 text-primary' : 'text-[#64748b]'" (click)="periodo.set('3m')">3M</button>
          <button class="px-3 py-1 rounded" [ngClass]="periodo() === '6m' ? 'bg-primary/10 text-primary' : 'text-[#64748b]'" (click)="periodo.set('6m')">6M</button>
          <button class="px-3 py-1 rounded" [ngClass]="periodo() === '12m' ? 'bg-primary/10 text-primary' : 'text-[#64748b]'" (click)="periodo.set('12m')">12M</button>
        </div>
      </div>
      <div class="flex h-56 items-end justify-between gap-3">
        <div *ngFor="let ponto of serie()" class="flex flex-1 flex-col items-center gap-2">
          <div class="flex h-full items-end gap-1">
            <div class="w-3 rounded-t bg-gray-200 dark:bg-gray-700" [style.height.%]="(ponto.despesa / maiorValor()) * 100"></div>
            <div class="w-3 rounded-t bg-primary" [style.height.%]="(ponto.receita / maiorValor()) * 100"></div>
          </div>
          <span class="text-[10px] font-bold text-[#64748b]">{{ ponto.mes }}</span>
        </div>
      </div>
    </article>
  </div>

  <article class="overflow-hidden rounded-xl border border-[#e7ebf1] bg-white dark:border-[#2a3441] dark:bg-[#1a242f]">
    <div class="border-b border-[#e7ebf1] px-5 py-4 dark:border-[#2a3441]"><h3 class="text-xl font-bold">Resumo Mensal</h3></div>
    <table class="w-full min-w-[760px] text-left">
      <thead class="text-xs uppercase tracking-wider text-[#64748b]"><tr><th class="px-5 py-3">Mês</th><th class="px-5 py-3">Renda</th><th class="px-5 py-3">Despesas</th><th class="px-5 py-3">Economia</th></tr></thead>
      <tbody>
        <tr *ngFor="let ponto of serie()" class="border-t border-[#eef2f6] dark:border-[#2a3441]">
          <td class="px-5 py-3 font-bold">{{ ponto.mes }}</td>
          <td class="px-5 py-3">{{ ponto.receita | currency: 'BRL' : 'symbol' : '1.2-2' : 'pt-BR' }}</td>
          <td class="px-5 py-3">{{ ponto.despesa | currency: 'BRL' : 'symbol' : '1.2-2' : 'pt-BR' }}</td>
          <td class="px-5 py-3 font-bold text-green-600">{{ (ponto.receita - ponto.despesa) | currency: 'BRL' : 'symbol' : '1.2-2' : 'pt-BR' }}</td>
        </tr>
      </tbody>
    </table>
  </article>
</section>
